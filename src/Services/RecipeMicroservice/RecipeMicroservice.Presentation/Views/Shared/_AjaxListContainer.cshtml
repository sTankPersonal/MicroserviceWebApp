@model dynamic
@{
    string listId = ViewBag.ListId ?? "ajaxList";
    string searchFormId = ViewBag.SearchFormId ?? "searchForm";
    string partialUrl = ViewBag.PartialUrl;
    string createUrl = ViewBag.CreateUrl;
    string createLabel = ViewBag.CreateLabel ?? "Create New Item";
    string containerId = $"{listId}Container";
    string? searchFieldsPartial = ViewData["SearchFieldsPartial"] as string;
}

<form id="@searchFormId" class="mb-3">
    <div class="row g-2 align-items-end">
        @if (!string.IsNullOrEmpty(searchFieldsPartial))
        {
            @await Html.PartialAsync((string) searchFieldsPartial, (object) Model)
        }
        <div class="col-auto">
            <button type="submit" class="btn btn-primary me-2">Search</button>
            <button type="button" class="btn btn-secondary" id="@($"{listId}ResetBtn")">Reset</button>
        </div>
    </div>
</form>

<a href="@createUrl" class="btn btn-primary mb-3">
    @createLabel
</a>

<div id="@containerId">
    @await Html.PartialAsync((string)ViewBag.PartialView, (object)Model)
</div>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        initializeAjaxList({
            listId: "@listId",
            formId: "@searchFormId",
            containerId: "@containerId",
            partialUrl: "@partialUrl"
        });
    });
</script>